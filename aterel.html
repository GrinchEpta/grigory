<!DOCTYPE html>
<html>
<head>
  <title>Форма</title>
  <style>
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h1>Форма</h1>
  <form id="myForm">
    <label for="subject">Тема:</label>
    <input type="text" id="subject" name="subject" required>
    <br>
    
    <label for="name">Имя:</label>
    <input type="text" id="name" name="name" required>
    <br>
    
    <label for="email">E-mail:</label>
    <input type="email" id="email" name="email" required>
    <br>
    
    <label for="text">Текст:</label>
    <textarea id="text" name="text" required></textarea>
    <br>
    
    <button type="submit">Отправить</button>
  </form>

  <script>
    const form = document.querySelector('#myForm');
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Отменяем отправку формы по умолчанию
      
      const subject = document.querySelector('#subject').value.trim();
      const name = document.querySelector('#name').value.trim();
      const email = document.querySelector('#email').value.trim();
      const text = document.querySelector('#text').value.trim();
      
      let isValid = true;
      
      if (subject === '') {
        showErrorMessage('subject', 'Пожалуйста, введите тему');
        isValid = false;
      } else {
        hideErrorMessage('subject');
      }
      
      if (name === '') {
        showErrorMessage('name', 'Пожалуйста, введите имя');
        isValid = false;
      } else {
        hideErrorMessage('name');
      }
      
      if (email === '') {
        showErrorMessage('email', 'Пожалуйста, введите E-mail');
        isValid = false;
      } else if (!validateEmail(email)) {
        showErrorMessage('email', 'Пожалуйста, введите корректный E-mail');
        isValid = false;
      } else {
        hideErrorMessage('email');
      }
      
      if (text === '') {
        showErrorMessage('text', 'Пожалуйста, введите текст');
        isValid = false;
      } else {
        hideErrorMessage('text');
      }
      
      if (isValid) {
        form.submit();
      }
    });
    
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(String(email).toLowerCase());
    }
    
    function showErrorMessage(fieldName, message) {
      const input = document.querySelector('#' + fieldName);
      const errorElement = document.createElement('span');
      errorElement.classList.add('error');
      errorElement.textContent = message;
      
      const existingError = document.querySelector('#' + fieldName + 'Error');
      if (existingError) {
        return;
      }
      
      input.parentNode.appendChild(errorElement);
    }
    
    function hideErrorMessage(fieldName) {
      const existingError = document.querySelector('#' + fieldName + 'Error');
      if (existingError) {
        existingError.remove();
      }
    }
  </script>
</body>
</html>